(function(t){function a(a){for(var n,s,o=a[0],c=a[1],l=a[2],g=0,d=[];g<o.length;g++)s=o[g],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(a);while(d.length)d.shift()();return r.push.apply(r,l||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],n=!0,o=1;o<e.length;o++){var c=e[o];0!==i[c]&&(n=!1)}n&&(r.splice(a--,1),t=s(s.s=e[0]))}return t}var n={},i={app:0},r=[];function s(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=n,s.d=function(t,a,e){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)s.d(e,n,function(a){return t[a]}.bind(null,n));return e},s.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=a,o=o.slice();for(var l=0;l<o.length;l++)a(o[l]);var u=c;r.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},1:function(t,a){},"1e2a":function(t,a,e){t.exports=e.p+"img/mask-2.9a238155.png"},2:function(t,a){},"25cd":function(t,a,e){t.exports=e.p+"img/mask-7.311a08e2.png"},3:function(t,a){},"368f":function(t,a,e){"use strict";var n=e("e92f"),i=e.n(n);i.a},"42fb":function(t,a,e){"use strict";var n=e("48bf"),i=e.n(n);i.a},"48b4":function(t,a,e){t.exports=e.p+"img/clothes.5cbfbe5a.png"},"48bf":function(t,a,e){},"4bdb":function(t,a,e){t.exports=e.p+"img/mask-3.df55eb14.png"},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("ImgShow"),e("ImgEdit")],1)},r=[],s=(e("96cf"),e("1da1")),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"bgImg",staticClass:"container",style:t.bgImg.style,on:{click:function(a){t.currentMaskIdx=-1}}},[t.showNewAvatar?e("img",{attrs:{src:t.newAvatar.imgUrl,alt:"新头像",width:t.newAvatar.width+"px",height:t.newAvatar.height+"px"}}):[null==t.bgImg.style?e("div",{staticClass:"upload-wrap",on:{click:t.handleUploadClick}},[e("div",{staticClass:"btn-upload"}),e("p",[t._v("点击上传你的头像")])]):t._l(t.listOfMask,(function(a,n){return e("div",{key:n,class:t.currentMaskIdx!=n?["mask-img-wrap"]:["mask-img-wrap","active"],style:{transform:"translateX("+a.x+"px) translateY("+a.y+"px) rotate("+a.r+"deg) scale("+a.s+")"},on:{click:function(a){a.stopPropagation(),t.currentMaskIdx=n},touchstart:t.handleTouchStart,touchmove:function(a){return a.preventDefault(),t.handleMaskMove(n,a)}}},[e("img",{staticClass:"mask-img",attrs:{src:a.imgUrl,alt:"口罩图片",width:a.width,height:a.height}}),t.currentMaskIdx==n?[e("div",{staticClass:"btn-close",on:{click:function(a){return t.handleCloseBtnClick(n)}}}),e("div",{staticClass:"btn-rotate-scale",on:{touchstart:function(a){return a.stopPropagation(),a.preventDefault(),t.handleTouchStart(a)},touchmove:function(a){return a.preventDefault(),a.stopPropagation(),t.handleRotateScale(n,a)}}})]:t._e()],2)})),e("input",{ref:"inputUpload",staticStyle:{display:"none"},attrs:{type:"file",multiple:"",accept:"image/*"},on:{change:t.handleChange}})]],2)},c=[],l=(e("a434"),e("3835")),u=e("70b0"),g=e.n(u),d={name:"ImgShow",data:function(){return{listOfMask:[],currentMaskIdx:0,start:{x:0,y:0},bgImg:{width:390,height:390,imgUrl:"",style:null},showNewAvatar:!1,newAvatar:{imgUrl:"",width:0,height:0}}},created:function(){var t=this;this.$bus.$on("reupload",(function(){t.handleUploadClick()})),this.$bus.$on("add-image",(function(a){t.$data.listOfMask.push({imgUrl:a,width:135,height:135,x:130,y:50,r:0,s:1}),t.$data.currentMaskIdx=t.$data.listOfMask.length-1})),this.$bus.$on("draw-avatar",(function(){t.$data.currentMaskIdx=-1,g.a.toPng(t.$refs.bgImg).then((function(a){t.$data.bgImg.style={height:t.$data.bgImg.width},t.$data.newAvatar.imgUrl=a,t.$data.newAvatar.width=t.$data.bgImg.width,t.$data.newAvatar.height=t.$data.bgImg.height,t.$data.showNewAvatar=!0}))}))},methods:{handleChange:function(t){var a=this,e=t.target.files[0],n=new FileReader;if(!/image.*/.test(e.type))return!1;n.readAsDataURL(e),n.onload=function(t){var e=new Image;e.src=t.target.result,e.onload=function(){var n=e.height*(a.$refs.bgImg.offsetWidth/e.width);a.$data.bgImg.height=n,a.$data.bgImg.width=a.$refs.bgImg.offsetWidth,a.$data.bgImg.imgUrl=t.target.result,a.$data.bgImg.style={backgroundImage:"url(".concat(t.target.result,")"),backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"".concat(n,"px")}}}},handleUploadClick:function(){this.$refs["inputUpload"].click()},getDistance:function(t,a){return[t-this.$data.start.x,a-this.$data.start.y]},updateStartPos:function(t,a){this.$data.start.x=t,this.$data.start.y=a},handleMaskMove:function(t,a){var e,n,i=a.touches[0],r=this.getDistance(i.clientX,i.clientY),s=Object(l["a"])(r,2),o=s[0],c=s[1],u=this.$data.listOfMask[t];e=u.x+o,n=u.y+c,e>=0&&e<=this.$data.bgImg.width-u.width&&n>=0&&n<=this.$data.bgImg.height-u.height&&(u.x=e,u.y=n),this.updateStartPos(i.clientX,i.clientY)},handleTouchStart:function(t){var a=t.touches[0];this.updateStartPos(a.clientX,a.clientY)},handleCloseBtnClick:function(t){this.$data.listOfMask.splice(t,1)},handleRotateScale:function(t,a){var e=a.touches[0],n=this.getDistance(e.clientX,e.clientY),i=Object(l["a"])(n,2),r=i[0],s=i[1],o=this.$data.listOfMask[t],c=this.$data.start.y*e.clientX-this.$data.start.x*e.clientY;o.s+=(r+s)/300,c>0?o.r-=Math.abs(s):c<0&&(o.r+=Math.abs(s)),this.updateStartPos(e.clientX,e.clientY)}}},h=d,p=(e("368f"),e("2877")),m=Object(p["a"])(h,o,c,!1,null,"64e252f2",null),f=m.exports,A=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("ul",{staticClass:"things-list"},t._l(t.listOfThings,(function(a,n){return e("li",{key:a.name,staticClass:"things-item",style:{backgroundImage:"url("+a.imgUrl+")"},on:{click:function(a){return t.handleSelectClick(n)}}})})),0),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"btn reupload",attrs:{role:"button"},on:{click:t.handleReuploadClick}},[t._v(" 重新上传 ")]),e("div",{staticClass:"btn g-avatar",attrs:{role:"button"},on:{click:t.handleNewAvatarClick}},[t._v(" 生成新头像 ")])])])},b=[],v=e("8b16"),k=e.n(v),w=e("1e2a"),x=e.n(w),I=e("4bdb"),C=e.n(I),y=e("75d4"),U=e.n(y),M=e("f020"),R=e.n(M),O=e("967c"),S=e.n(O),E=e("25cd"),V=e.n(E),L=e("6521"),P=e.n(L),Y=e("9d73"),F=e.n(Y),J=e("48b4"),H=e.n(J),j={name:"ImgEdit",data:function(){return{listOfThings:[{name:"mask-1",imgUrl:k.a},{name:"mask-7",imgUrl:V.a},{name:"glasses-1",imgUrl:P.a},{name:"glasses-2",imgUrl:F.a},{name:"mask-5",imgUrl:R.a},{name:"mask-6",imgUrl:S.a},{name:"mask-2",imgUrl:x.a},{name:"mask-3",imgUrl:C.a},{name:"mask-4",imgUrl:U.a},{name:"clothes",imgUrl:H.a}]}},methods:{handleReuploadClick:function(){this.$bus.$emit("reupload")},handleSelectClick:function(t){this.$bus.$emit("add-image",this.$data.listOfThings[t].imgUrl)},handleNewAvatarClick:function(){this.$bus.$emit("draw-avatar")}}},K=j,B=(e("42fb"),Object(p["a"])(K,A,b,!1,null,"a3c90480",null)),G=B.exports,X=e("ab39"),Z={name:"App",data:function(){return{}},components:{ImgEdit:G,ImgShow:f},created:function(){document.body.addEventListener("touchmove",(function(t){t.preventDefault()}),{passive:!1})},methods:{init:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X["a"].ssdMobilenetv1.load("@/assets/weights");case 2:case"end":return t.stop()}}),t)})))()},handleReupload:function(){this.$data.isReupload++}}},q=Z,T=(e("5c0b"),Object(p["a"])(q,i,r,!1,null,null,null)),N=T.exports;n["a"].config.productionTip=!1,n["a"].prototype.$bus=new n["a"]({}),new n["a"]({render:function(t){return t(N)}}).$mount("#app")},"5c0b":function(t,a,e){"use strict";var n=e("9c0c"),i=e.n(n);i.a},6521:function(t,a,e){t.exports=e.p+"img/glasses-1.781aec06.png"},"75d4":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUEAAACVBAMAAAA0+FWPAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAAITgAACE4AUWWMWAAAAAkUExURUdwTCoqKgwMDOrq6ufn59vb28PDw+jo6Nra2vb29u/v7/39/U1AUwYAAAAJdFJOUwAECPKiIznDakLxfdwAAA8ZSURBVHja7FvLjxu3Hd4JUKDH4aC1fcwIcLD3bou1cgqSXSA5ZV236NUN0n/AaACpl8Zp4HavFlKQPM4CLidH98Lynyt/L3Je0mp3Zx8HU9JIw6HEb77fkw8dHHwoH8qH8qHcbSnqh4Sm+nhc99E/1QOi61ffjyuftCflgwF4uPztGMzv2+Z1WTwMhI/W7dEQYam+cu3F2cMA+PS8bZvvBxCLJ84Yc1w/BEFX37Sx/G4g0PIH7Vz7EFSxUI8BYHv0dR/Lr9daG+2iKt43QnW4jNIEMRd963YRnwNVvGeI5SdrDQDb9rue91N/ihwCie74nh23+koDVa5tTvv+uXjxLF4Bek/U/VqJhhJxnKquNItC1W8cgjdvX98fxFI9JnzRrZypDsTiQCn19HO+eI+qqA6fBYswjl7WqujgKEqlFk9ARfU9qmJRPloRQPfux0WtVM8HKVUtQBWjLup7UsXyQH0Zgvde6+Z0sVCqr4iAcBFV0YBF349XLKpvGKA5rRBhTwGUqqsFqaJ2+uLsHlKI4nGIxVqrj5+PKARjjrAXh2uGeA8BWh3+HBCiPnoZoUSI3cCMxgwQURXBou88QJeP/oYAvf/3jwCwVgMEikgEVcRy516x+DIQhW9PAUcVtbCf3ER/gwhRFQHlHXtFsBLi8LQiClXZB6BYzKKKWt+pV1SPLQMEK0GAasSQQGRV1OYOvWLBVhLCBVvJGGBRFAIxq+Kg0S/+MFP5etg5W0kI78lKagQ4wgjAkyrqsSr+kpHfvLz9+6BntpLwP7QS9IVqMv2O9oxecaXthCr+y/pg/biAkx0Wqp5qAb8RfupJL1lJ+C5byaSdComgihYx9lRxFWYrm0krCf95LkpYFFuyM4EIqggYe15xToRqyko2L9kTTsuYc7CkihDBvd6cqXRxRoT/LTrjkr6VLKb8TAdiIV5xhRz6HKALNSuH5chK/Kk4wl7qOvI5HVX0EaOPqljeAodiCFNWsgsgW0uNqggkRpDiFdUUh57f7eB8bw6nrKQsd6a5hcj56ecRYFRGvzkjaQiHFpM4D2g6AD0cLIK0UG1TRWpi8cEIVS/jEisBBg/Ky0ZbQuLhCkj0MZ/8OH4nmpdw6BkBveUzGwgcwyVU1ntCi3fh+aaYw2JgJaiEl8dalQM0QvT+BO6LpAzOlzF6AeKp94CXLMOxcGZtB7DcE3NYjK0EcsI9AGY5L95ARh6f0StCWVFvDI8hAmuMhi4RcHgQaOv5Hdp5Vo0NaJv6aO9YMkViRaqIAStszgD2CrF4HO0ECmAEEsVI4YxrocoH1gD8CUsCZz3YoDwfh7GV7DvyZ5dzuOK4ehx/sVpRdznkBgnBXBFst56OmgOz9yx21IINoMlW8mfOZ9S+c8A5trx4xrnCiRIOkcSQEAhGoiyx6xMwbskVJAPkcBhL6u3BbkLOHVVEPQvvX6t6xQbAvNjeJ3jTHmYM5Dy+hMXOG4n5Ioq0byVVvZcZ91SRAzT3tnkeEXpRQY3YwIzgJEAQ91wTtORc2rOn0XwX1Bhuc7OYiiVXyunBMlgV+YeOFyt0M5679FagBJ3793wFnh4rUrOsBMFuFp1YUomrvtrIpuMVCZY/WbEtJIlB2PYoV69Z2siqJpLhGnMNL6xi97PpWwkxeMWxZY4tbzhWvX8WyCRZ1USuvsMV5r10C551D69goyTq4N9NZFwx4l5x+JUDNDjZ+LsGzVRTtxq71QyAxApjB+BYQ71oK+UfmirZ5oMbZ1wHB1efKsq5Iv2cI0NJsFCaXrMQUYyWhelxoCPV6a7YtGxCSFaCAK8xlYVekVTxUwwEBu5e8whG3hAOdM0ZL4NGUFRNjfiI0g/WdWPJnvnCRCKGCEUVkUOProRZYj4ALHdvu3g815GVeBY6fYs5pIxrMNl6VTETxKiKyCF1YzUrIZPotRVCNeP16UKq4gvkcNwg4ypvArGuRRWdRQ5tD0sq5MCJNk0ufFgsyzp418+4ymsjzOHvxaeRQ2vFBOz2+YREoUDqtuX4h1K+ZizZPoK2oaVYZm84JQI/EhEeP0/zHxNTNFfzihyg0ZZ11r9rFUs0um4sueGUOeTlHKANxwxtr02jJxUJLlsJzH/cbC41B+hlYDeTItuVJEvpDrpM25xePSXcY5C/pokSihL4fqlackjmr7G3jHf3LlnJLBO4Ys9rP6CNI1tmtnstRWb2jD2LvkhTSHNMlhcCcW27nmSgXwmD52RnG7kYEy/EjudZWJLJ2XVWPbPNTvU23XS0wsDtLmSacK6J+kIQZgod7jowsKyPj0lMcMUYWHGNH6SVZynPCFDGBGsvFDracaAzQIPr+1hwGZ0wMXjCmW7DA4cVu+qZ8EEiVhGHmhZ4EaMhiIY+Ob6Eq6t0ThDlHuBitpSZrKTjFSNCndTMoYQFoMMS6XNyYohTTdgMQ0zaGzmslZoVIAToKnNIsjPcp2PjEaEaLVJFWEZuSiBGW7+o65kpxAWrNTsQ6twlBrURHMIYijPxhhrpdJsgWg0j+pmXDcsycUjEEA62VKSPhNvqxC8bO0qbRJ0gXtRzqyEqoixJojzppR2bsCgkIepYNMJzTmxGOKzV7IuGUczEIfnAFlCItglTZC1GfKVQ7Ry7Im2McDi7kCGwMIfkNRzqIdptq5PtEpGZQLJrDU0EK+gAcngLCNWafI3JhVxKK2IVTIxPoJOSyldoTVPdjpSTq0mC08KSI7kj4JaojZ9ctyTTAn9Yq9k3o5QFSVn4iBAIBmJLMm2z7cTPzKTBli0pgXB4K1KmHVmxXwDVuraFlyGILVWaNlNLF6GZwavCIyIsZyexICknrpJYuXuCAGQCJIRPiIlqx80o6vgLNb+Usy1jcQCCYFD3CKGl6qSVRKm0wRPyiRfzG4p4bFQyMQVyioyzAzEV5DPxHF/scW7FY7OUdeoExMXYSOhEqliQIdkybsmwDSdptyJlsuVspDkjJIKS+pnEYJvSRs0O3nBqeRtSLlHKmCQgSxSXMwRtko52RgJGsgzOezlS3kpMOSApkwthilwKcxJenKiBcymhwLDHxRFAfRsemyyFum9pv7QcOMRQvug4YtNTzEa0AOwa2L4Fj10W2ZbbXumfoufZVkA9MEzfgi3jkHlNikZ+pt23mMEJivlIzZA69PZPwjhlwXpoWLbtdQorK4wCil1d7iBquuBsNtqy8GeuAw/9JUTmo7QEsLXUUxz/44udZcmWcC3u6J7QyqIomi8uLxN/lCrP2SM415vEsrxstkQ9vKZ8XeIRfn65faMLJFDY8rMJKZ8bHoj0JsZ5p0IILaWG7U0KZkARwnaEHnVpGmF5rlkIPPLmxUXe3RARaswabgAQrUzv5hBIhD4+U2NDIQ5HFPJGitCwFt4EIiW4uzgMmhGejJx6WZxLCiwrOF7nbUbBt6AhNxMy50I7pRwwdMFftsa7TM+Hk6Ve9n7gdxttZgCIUXGnpXiyyL8OfXpRdhGSCgbe3xHEUnRrbo4RxoM7pEyTlK05Gfl0lRHSFDkuSIQg+zuAww6+hg9Nv//BabuE57Jnzru9DS5qEIflIOCU6off7CxLHHpyxw0f+B2e8MAaOoeahjDCZ2zB7tY0yy0EL3N3J4PACP9d+HZn+Qv+S80lopZ8aDp0pSNDx2PT9lvEGz36dstO7T/m8nKUW8jCztayhrF5R5pLpocIA/aIpiUxSk0afmXs4LKPFpeXcQq5B8IMUJziUmhqmKqkdHRl2VdMSjrMPgjr0UChlN0r2xEatpSmTVBN1zpYGZuG1LQfkDHiiaXsg3C85Acc1pdJGTppJDakjGVnmMPRfeuyn4oQL0dYVxP/XYhp4E45v+pKOTm3iXTM0WQOvY+v7sNhTX/kKsfr8dViAUt4VWxSLyBvrRZVV8psJg0bRXd4YmSI4GTSqWPD4G6W8o2BHuK+r3yG/VdTO+9p16GCnYpVXVeLyCg86VURhyY7G+502Yc6cN1LaiPWjJWJw9gTIqH/udUxq67iA/tX06uS5Y5hgEKEJLJlx4jRhgmpeGrx38AztW2yWyfCAeElg4DJLS7FzvbV4lWWsri7phF6mhRiKKy0KFOExRXduHxES6M70E0v3pdliRcLXJpWiiAXoBGIUHcGw8lLI5/iFht+Ujxu2AE1THXXlhMOLgVXSP8HW7YXwAYxiIbYqMBWxUFJP4NzDgRxKZqI1C2ztDNmkinHkqbJwZz0sMbd/wVALCIxRTyJx7LT/64NacimfOCJL1jXe9XNX5tO4GWiGgbTNJ3I2IxyHop6/2/nbHIahoEo3LlB4gX7VIILUKlS1l10C1K4ARH7IOUCFeQKLcus2lNij8fOODgNbTNVkTAbqNrmMfHPvG/s4B4MfQmcUsDsMjM/wK4/vCEttNdJN51XW0oP3WrGV7XuprNhQXlDnvO77GM4whFGJAJ7O9B2yYqYZpA8uMzqEExDrBP0U5sd5jbBWAUM4s/rn8yxq61bmNnI9NpcPpPn7s9ANF9SMIYCdM6QJb6I5ZGUOnzNBzF8lyFLmQRqRwYbeimXs3Zjm2mksdy3BVhZlYhhx2AHrFQeBK4dYg7IEJHOTQ7aTQyRrA4lWu2Al+rRmz3xQ5naKKLyY1ikHbWitk6/mLxC72oBRGEvQSIGinwtZGr01YE49H5/Bnugsv4e2dtCpAKuPit0za4c+stg7lzoqL5mvmO5FuiHuJXz7m1To9tuD53OwX5pK6aHra2j6eUaP/q+bp7mEtOhP685L5tNXT16oVSAjDeUlpO2pRb3qtwJaon5UDFv8fDWrOra85LHtg3wTG6cTOsBR/2+aj6eQqt56e7X+K6lH5bspWyajZZaxziPfnm1bpqyiPKEyUv0uPPrmH+8L4qXktprUTwfd+sCN9meY1DzSVoqsJmFHP8kCrOpduhGo4hoR12qT0YgMLOq0nPlZc4mz0RimPQ8Ph4MyUZE6Z6Rerbg5IncY+yIgelX9ghsZpoHMCxayH0iaAFAJoJgbU7Sk9kroSqFkodAgvnsTCqCVqSeaSFFNsF4QS+s0UYcARI5ecHkbfokmIeleIwBoRj2m/l/ZkhZkmvIYzJ1LgHIdFChDqnVC8RjCP4g/4GkY4HXVOmEYhc1YgzQSAGZi9XFH81wXWHxK5pHLZxCN26m3ZzY5K9F8L/9t9+0b4G2VTrjL0LmAAAAAElFTkSuQmCC"},"8b16":function(t,a,e){t.exports=e.p+"img/mask-1.1248680a.png"},"967c":function(t,a,e){t.exports=e.p+"img/mask-6.29e9ce3d.png"},"9c0c":function(t,a,e){},"9d73":function(t,a,e){t.exports=e.p+"img/glasses-2.d9e19b85.png"},e92f:function(t,a,e){},f020:function(t,a,e){t.exports=e.p+"img/mask-5.1f0c2536.png"}});
//# sourceMappingURL=app.35a84e6d.js.map